{"version":3,"file":"FontPicker.es.js","sources":["../src/FontPicker.ts"],"sourcesContent":["import {\n\tFont,\n\tFONT_FAMILY_DEFAULT,\n\tFontList,\n\tFontManager,\n\tgetFontId,\n\tOptions,\n\tOPTIONS_DEFAULTS,\n\tSortOption,\n} from \"@samuelmeuli/font-manager\";\n\n/**\n * Font picker user interface\n */\nexport default class FontPicker {\n\t// Button in the font list which contains and highlights the currently active font\n\tprivate activeFontButton: HTMLButtonElement;\n\n\t// <p> element in the dropdownButton containing the name of the currently active font\n\tprivate dropdownFamily: HTMLParagraphElement;\n\n\t// State of the font picker (expanded or collapsed)\n\tprivate expanded = false;\n\n\t// Instance of the FontManager class used for managing, downloading and applying fonts\n\tprivate fontManager: FontManager;\n\n\t// <div> element in which the font picker is rendered\n\tprivate fontPickerDiv: HTMLDivElement;\n\n\t// Font list which is shown below the dropdownButton if expanded === true\n\tprivate ul: HTMLUListElement;\n\n\t/**\n\t * Instantiate a FontManager object and generate the font picker HTML\n\t */\n\tconstructor(\n\t\tapiKey: string,\n\t\tdefaultFamily: string = FONT_FAMILY_DEFAULT,\n\t\t{\n\t\t\tpickerId = OPTIONS_DEFAULTS.pickerId,\n\t\t\tfamilies = OPTIONS_DEFAULTS.families,\n\t\t\tcategories = OPTIONS_DEFAULTS.categories,\n\t\t\tscripts = OPTIONS_DEFAULTS.scripts,\n\t\t\tvariants = OPTIONS_DEFAULTS.variants,\n\t\t\tfilter = OPTIONS_DEFAULTS.filter,\n\t\t\tlimit = OPTIONS_DEFAULTS.limit,\n\t\t\tsort = OPTIONS_DEFAULTS.sort,\n\t\t}: Partial<Options>,\n\t\t// eslint-disable-next-line @typescript-eslint/no-empty-function\n\t\tonChange: (font: Font) => void = (): void => {},\n\t) {\n\t\t// Function bindings\n\t\tthis.closeEventListener = this.closeEventListener.bind(this);\n\t\tthis.toggleExpanded = this.toggleExpanded.bind(this);\n\n\t\t// Initialize FontManager and FontPicker UI\n\t\tconst options = {\n\t\t\tpickerId,\n\t\t\tfamilies,\n\t\t\tcategories,\n\t\t\tscripts,\n\t\t\tvariants,\n\t\t\tfilter,\n\t\t\tlimit,\n\t\t\tsort,\n\t\t};\n\t\tthis.fontManager = new FontManager(apiKey, defaultFamily, options, onChange);\n\t\tthis.generateUI(sort);\n\t}\n\n\t/**\n\t * Download list of available fonts and generate the font picker HTML\n\t */\n\tprivate generateUI(sort: SortOption): void {\n\t\tconst { selectorSuffix } = this.fontManager;\n\t\tconst pickerId = `font-picker${selectorSuffix}`;\n\n\t\t// Locate <div> where font picker should be rendered\n\t\tthis.fontPickerDiv = document.getElementById(pickerId) as HTMLDivElement;\n\t\tif (!this.fontPickerDiv) {\n\t\t\tthrow Error(`Missing div with id=\"${pickerId}\"`);\n\t\t}\n\n\t\t// Generate HTML for dropdown button (contains family of active font and dropdown icon)\n\t\tconst dropdownButton = document.createElement(\"button\");\n\t\tdropdownButton.classList.add(\"dropdown-button\");\n\t\tdropdownButton.onclick = this.toggleExpanded;\n\t\tdropdownButton.onkeypress = this.toggleExpanded;\n\t\tdropdownButton.type = \"button\";\n\t\tthis.fontPickerDiv.appendChild(dropdownButton);\n\t\t// Font family of active font\n\t\tthis.dropdownFamily = document.createElement(\"p\");\n\t\tthis.dropdownFamily.textContent = this.fontManager.getActiveFont().family;\n\t\tthis.dropdownFamily.classList.add(\"dropdown-font-family\");\n\t\tdropdownButton.appendChild(this.dropdownFamily);\n\t\t// Dropdown icon (possible classes/states: \"loading\", \"finished\", \"error\")\n\t\tconst dropdownIcon = document.createElement(\"p\");\n\t\tdropdownIcon.classList.add(\"dropdown-icon\", \"loading\");\n\t\tdropdownButton.appendChild(dropdownIcon);\n\n\t\t// Fetch and render font list\n\t\tthis.fontManager\n\t\t\t.init()\n\t\t\t.then((fontMap: FontList): void => {\n\t\t\t\tconst fonts = Array.from(fontMap.values());\n\t\t\t\tif (sort === \"alphabet\") {\n\t\t\t\t\tfonts.sort((font1: Font, font2: Font): number =>\n\t\t\t\t\t\tfont1.family.localeCompare(font2.family),\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tthis.generateFontList(fonts);\n\t\t\t\tdropdownIcon.classList.replace(\"loading\", \"finished\");\n\t\t\t})\n\t\t\t.catch((err: Error): void => {\n\t\t\t\t// On error: Log error message\n\t\t\t\tdropdownIcon.classList.replace(\"loading\", \"error\");\n\t\t\t\tconsole.error(\"Error trying to fetch the list of available fonts\");\n\t\t\t\tconsole.error(err);\n\t\t\t});\n\t}\n\n\t/**\n\t * Generate <ul> with all font families below downloadButton\n\t */\n\tprivate generateFontList(fonts: Font[]): void {\n\t\t// Generate HTML for font list below dropdown button\n\t\tthis.ul = document.createElement(\"ul\");\n\t\tthis.ul.classList.add(\"font-list\");\n\n\t\t// Generate HTML for font list entries\n\t\tfonts.forEach((font): void => {\n\t\t\tthis.addFontLi(font);\n\t\t});\n\t\tthis.fontPickerDiv.appendChild(this.ul);\n\n\t\t// Highlight active font and save reference to the corresponding HTML element\n\t\tconst activeFontFamily = this.fontManager.getActiveFont().family;\n\t\tconst activeFontId = getFontId(activeFontFamily);\n\t\tconst fontButtonId = `font-button-${activeFontId}${this.fontManager.selectorSuffix}`;\n\t\tthis.activeFontButton = document.getElementById(fontButtonId) as HTMLButtonElement;\n\t\tif (this.activeFontButton) {\n\t\t\tthis.activeFontButton.classList.add(\"active-font\");\n\t\t} else {\n\t\t\tconsole.error(`Could not find font button with ID (${fontButtonId})`);\n\t\t}\n\t}\n\n\t/**\n\t * Generate list entry in font picker UI for the provided font. Highlight it if it's the active\n\t * font\n\t */\n\tprivate addFontLi(font: Font, listIndex?: number): void {\n\t\tconst fontId = getFontId(font.family);\n\t\tconst li = document.createElement(\"li\");\n\t\tli.classList.add(\"font-list-item\");\n\t\tconst fontButton = document.createElement(\"button\");\n\t\tfontButton.type = \"button\";\n\t\tfontButton.id = `font-button-${fontId}${this.fontManager.selectorSuffix}`;\n\t\tfontButton.classList.add(\"font-button\");\n\t\tfontButton.textContent = font.family;\n\n\t\t// Update active font when font button is clicked\n\t\tconst onActivate = (): void => {\n\t\t\tthis.toggleExpanded();\n\t\t\tthis.setActiveFont(font.family);\n\t\t};\n\t\tfontButton.onclick = onActivate;\n\t\tfontButton.onkeypress = onActivate;\n\t\tli.appendChild(fontButton);\n\n\t\t// Insert font button at the specified index. If not specified, append to the end of the list\n\t\tif (listIndex !== undefined && listIndex !== null) {\n\t\t\tthis.ul.insertBefore(li, this.ul.children[listIndex]);\n\t\t} else {\n\t\t\tthis.ul.appendChild(li);\n\t\t}\n\t}\n\n\t/**\n\t * EventListener for closing the font picker when clicking anywhere outside it\n\t */\n\tprivate closeEventListener(e: MouseEvent): void {\n\t\tlet targetEl = e.target as Node; // Clicked element\n\t\tconst fontPickerEl = document.getElementById(`font-picker${this.fontManager.selectorSuffix}`);\n\n\t\t// eslint-disable-next-line no-constant-condition\n\t\twhile (true) {\n\t\t\tif (targetEl === fontPickerEl) {\n\t\t\t\t// Click inside font picker: Exit\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (targetEl.parentNode) {\n\t\t\t\t// Click outside font picker: Move up the DOM\n\t\t\t\ttargetEl = targetEl.parentNode;\n\t\t\t} else {\n\t\t\t\t// DOM root is reached: Toggle picker, exit\n\t\t\t\tthis.toggleExpanded();\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Expand/collapse the picker's font list\n\t */\n\tprivate toggleExpanded(): void {\n\t\tif (this.expanded) {\n\t\t\tthis.expanded = false;\n\t\t\tthis.fontPickerDiv.classList.remove(\"expanded\");\n\t\t\tdocument.removeEventListener(\"click\", this.closeEventListener as EventListener);\n\t\t} else {\n\t\t\tthis.expanded = true;\n\t\t\tthis.fontPickerDiv.classList.add(\"expanded\");\n\t\t\tdocument.addEventListener(\"click\", this.closeEventListener as EventListener);\n\t\t}\n\t}\n\n\t/**\n\t * @see FontManager\n\t */\n\tpublic getFonts(): FontList {\n\t\treturn this.fontManager.getFonts();\n\t}\n\n\t/**\n\t * Add font to font picker and font map\n\t */\n\tpublic addFont(fontFamily: string, index?: number, url = ''): void {\n\t\tif (Array.from(this.fontManager.getFonts().keys()).includes(fontFamily)) {\n\t\t\tthrow Error(\n\t\t\t\t`Did not add font to font picker: Font family \"${fontFamily}\" is already in the list`,\n\t\t\t);\n\t\t}\n\n\t\t// Add font to font map in FontManager\n\t\tthis.fontManager.addFont(fontFamily, true, url);\n\n\t\t// Add font to list in font picker\n\t\tconst font = this.fontManager.getFonts().get(fontFamily);\n\t\tif (font) {\n\t\t\tthis.addFontLi(font, index);\n\t\t} else {\n\t\t\tconsole.error(`Font \"${fontFamily}\" is missing in font list`);\n\t\t}\n\t}\n\n\t/**\n\t * Remove font from font picker and font map\n\t */\n\tpublic removeFont(fontFamily: string): void {\n\t\t// Remove font from font map in FontManager\n\t\tthis.fontManager.removeFont(fontFamily);\n\n\t\t// Remove font from list in font picker\n\t\tconst fontId = getFontId(fontFamily);\n\t\tconst fontButton = document.getElementById(\n\t\t\t`font-button-${fontId}${this.fontManager.selectorSuffix}`,\n\t\t);\n\t\tif (fontButton) {\n\t\t\tconst fontLi = fontButton.parentElement;\n\t\t\tfontButton.remove();\n\t\t\tif (fontLi) {\n\t\t\t\tfontLi.remove();\n\t\t\t}\n\t\t} else {\n\t\t\tthrow Error(\n\t\t\t\t`Could not remove font from font picker: Font family \"${fontFamily}\" is not in the list`,\n\t\t\t);\n\t\t}\n\t}\n\n\t/**\n\t * @see FontManager\n\t */\n\tpublic getActiveFont(): Font {\n\t\treturn this.fontManager.getActiveFont();\n\t}\n\n\t/**\n\t * Set the specified font as the active font, download it and highlight it in the font list\n\t */\n\tpublic setActiveFont(fontFamily: string): void {\n\t\tthis.fontManager.setActiveFont(fontFamily);\n\t\tconst fontId = getFontId(fontFamily);\n\n\t\t// Write new font family in dropdown button and highlight font entry in the list\n\t\tthis.dropdownFamily.textContent = fontFamily;\n\t\tthis.dropdownFamily.style.setProperty(\"font-family\", fontFamily);\n\t\tif (this.activeFontButton) {\n\t\t\tthis.activeFontButton.classList.remove(\"active-font\");\n\t\t\tthis.activeFontButton = document.getElementById(\n\t\t\t\t`font-button-${fontId}${this.fontManager.selectorSuffix}`,\n\t\t\t) as HTMLButtonElement;\n\t\t\tthis.activeFontButton.classList.add(\"active-font\");\n\t\t} else {\n\t\t\tconsole.error(\"`activeFontButton` is undefined\");\n\t\t}\n\t}\n\n\t/**\n\t * Update the onChange function (executed when changing the active font)\n\t */\n\tpublic setOnChange(onChange: (font: Font) => void): void {\n\t\tthis.fontManager.setOnChange(onChange);\n\t}\n}\n"],"names":[],"mappings":"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"}